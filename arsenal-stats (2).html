<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arsenal FC Stats 2025/26</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #DB0007 0%, #9C0007 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            padding: 30px 0;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .card h2 {
            color: #DB0007;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 3px solid #DB0007;
            padding-bottom: 10px;
        }

        .fixture {
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #DB0007;
        }

        .fixture-date {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .fixture-teams {
            font-weight: bold;
            font-size: 1.1em;
            color: #333;
        }

        .result {
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .result.win {
            border-left: 4px solid #28a745;
        }

        .result.draw {
            border-left: 4px solid #ffc107;
        }

        .result.loss {
            border-left: 4px solid #dc3545;
        }

        .score {
            font-weight: bold;
            font-size: 1.3em;
            color: #DB0007;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #DB0007;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .stat-number {
            font-weight: bold;
            color: #DB0007;
        }

        .points-comparison {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }

        .points-box {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            flex: 1;
            margin: 0 10px;
        }

        .points-box h3 {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .points-box .big-number {
            font-size: 3em;
            font-weight: bold;
            color: #DB0007;
        }

        .difference {
            margin-top: 10px;
            font-weight: bold;
        }

        .difference.positive {
            color: #28a745;
        }

        .difference.negative {
            color: #dc3545;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .points-comparison {
                flex-direction: column;
            }
            
            .points-box {
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚öΩ Arsenal FC Stats</h1>
            <p>2025/26 Premier League Season</p>
            <p id="last-updated" style="font-size: 0.9em; opacity: 0.8; margin-top: 10px;"></p>
        </header>

        <!-- API Key Setup Notice -->
        <div id="api-setup" class="card full-width" style="background: #fff3cd; border-left: 4px solid #ffc107; display: none;">
            <h2>‚öôÔ∏è Setup Required</h2>
            <p style="margin-bottom: 15px;">To get live Arsenal data, you need a free API key:</p>
            <ol style="margin-left: 20px; margin-bottom: 15px;">
                <li>Go to <a href="https://www.api-football.com/register" target="_blank" style="color: #DB0007; font-weight: bold;">api-football.com/register</a></li>
                <li>Sign up for a free account (100 requests/day)</li>
                <li>Copy your API key from the dashboard</li>
                <li>Paste it below and click Save</li>
            </ol>
            <div style="display: flex; gap: 10px; align-items: center;">
                <input type="text" id="api-key-input" placeholder="Paste your API key here" style="flex: 1; padding: 12px; border: 2px solid #DB0007; border-radius: 8px; font-size: 1em;">
                <button onclick="saveApiKey()" style="padding: 12px 24px; background: #DB0007; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 1em;">Save Key</button>
            </div>
        </div>

        <!-- Loading Indicator -->
        <div id="loading" class="card full-width" style="text-align: center; display: none;">
            <h2>‚öΩ Loading Arsenal Data...</h2>
            <p>Fetching the latest stats from the Premier League</p>
        </div>

        <!-- Data Container - Will be populated by JavaScript -->
        <div id="data-container" style="display: none;">
        <div class="stats-grid">
            <!-- Points Comparison -->
            <div class="card full-width">
                <h2>üìä Season Progress</h2>
                <div class="points-comparison">
                    <div class="points-box">
                        <h3>2025/26 Season</h3>
                        <div class="big-number">47</div>
                        <p>points after 22 games</p>
                    </div>
                    <div class="points-box">
                        <h3>2024/25 Season</h3>
                        <div class="big-number">43</div>
                        <p>points after 22 games</p>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <div class="difference positive">‚ñ≤ 4 points ahead of last season's pace</div>
                </div>
            </div>

            <!-- Daily Trivia -->
            <div class="card full-width">
                <h2>üß† Daily Arsenal Trivia</h2>
                <div id="trivia-container">
                    <div id="trivia-question" style="font-size: 1.2em; font-weight: bold; margin-bottom: 20px; color: #333;"></div>
                    <div id="trivia-options" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-bottom: 20px;"></div>
                    <div id="trivia-result" style="padding: 15px; border-radius: 8px; font-weight: bold; display: none;"></div>
                    <div id="trivia-explanation" style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px; display: none;"></div>
                </div>
            </div>

            <!-- Upcoming Fixtures -->
            <div class="card">
                <h2>üìÖ Upcoming Fixtures</h2>
                <div class="fixture">
                    <div class="fixture-date">Sat, 7 Feb 2026 - 15:00</div>
                    <div class="fixture-teams">Arsenal vs Liverpool</div>
                </div>
                <div class="fixture">
                    <div class="fixture-date">Sat, 14 Feb 2026 - 17:30</div>
                    <div class="fixture-teams">Newcastle vs Arsenal</div>
                </div>
                <div class="fixture">
                    <div class="fixture-date">Sat, 21 Feb 2026 - 15:00</div>
                    <div class="fixture-teams">Arsenal vs Manchester United</div>
                </div>
                <div class="fixture">
                    <div class="fixture-date">Sat, 28 Feb 2026 - 15:00</div>
                    <div class="fixture-teams">Chelsea vs Arsenal</div>
                </div>
            </div>

            <!-- Recent Results -->
            <div class="card">
                <h2>‚öΩ Recent Results</h2>
                <div class="result win">
                    <div>
                        <div class="fixture-date">Sat, 1 Feb 2026</div>
                        <div class="fixture-teams">Arsenal vs West Ham</div>
                    </div>
                    <div class="score">3-0</div>
                </div>
                <div class="result win">
                    <div>
                        <div class="fixture-date">Wed, 28 Jan 2026</div>
                        <div class="fixture-teams">Tottenham vs Arsenal</div>
                    </div>
                    <div class="score">1-3</div>
                </div>
                <div class="result draw">
                    <div>
                        <div class="fixture-date">Sat, 25 Jan 2026</div>
                        <div class="fixture-teams">Arsenal vs Manchester City</div>
                    </div>
                    <div class="score">2-2</div>
                </div>
                <div class="result win">
                    <div>
                        <div class="fixture-date">Sat, 18 Jan 2026</div>
                        <div class="fixture-teams">Brentford vs Arsenal</div>
                    </div>
                    <div class="score">0-2</div>
                </div>
                <div class="result win">
                    <div>
                        <div class="fixture-date">Sat, 11 Jan 2026</div>
                        <div class="fixture-teams">Arsenal vs Brighton</div>
                    </div>
                    <div class="score">4-1</div>
                </div>
            </div>

            <!-- Top Scorers -->
            <div class="card">
                <h2>‚öΩ Top Scorers</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Player</th>
                            <th>Goals</th>
                            <th>Assists</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Bukayo Saka</td>
                            <td class="stat-number">11</td>
                            <td class="stat-number">9</td>
                        </tr>
                        <tr>
                            <td>Kai Havertz</td>
                            <td class="stat-number">10</td>
                            <td class="stat-number">4</td>
                        </tr>
                        <tr>
                            <td>Gabriel Jesus</td>
                            <td class="stat-number">8</td>
                            <td class="stat-number">6</td>
                        </tr>
                        <tr>
                            <td>Martin √òdegaard</td>
                            <td class="stat-number">6</td>
                            <td class="stat-number">8</td>
                        </tr>
                        <tr>
                            <td>Gabriel Martinelli</td>
                            <td class="stat-number">5</td>
                            <td class="stat-number">5</td>
                        </tr>
                        <tr>
                            <td>Leandro Trossard</td>
                            <td class="stat-number">4</td>
                            <td class="stat-number">3</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Clean Sheets -->
            <div class="card">
                <h2>üß§ Defensive Stats</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Goalkeeper</th>
                            <th>Clean Sheets</th>
                            <th>Games</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>David Raya</td>
                            <td class="stat-number">12</td>
                            <td>21</td>
                        </tr>
                        <tr>
                            <td>Aaron Ramsdale</td>
                            <td class="stat-number">1</td>
                            <td>1</td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                    <strong>Goals Conceded:</strong> <span class="stat-number">15</span> in 22 games
                </div>
            </div>
        </div>
        </div> <!-- End data-container -->
    </div>

    <script>
        // API Configuration
        const API_KEY_STORAGE = 'arsenalStatsApiKey';
        const ARSENAL_TEAM_ID = 42; // Arsenal's ID in API-Football
        const PREMIER_LEAGUE_ID = 39;
        const CURRENT_SEASON = 2025;
        
        // Check for API key on load
        window.onload = function() {
            const apiKey = localStorage.getItem(API_KEY_STORAGE);
            if (!apiKey) {
                document.getElementById('api-setup').style.display = 'block';
            } else {
                loadArsenalData();
            }
            displayTrivia();
        };
        
        // Save API key
        function saveApiKey() {
            const apiKey = document.getElementById('api-key-input').value.trim();
            if (apiKey) {
                localStorage.setItem(API_KEY_STORAGE, apiKey);
                document.getElementById('api-setup').style.display = 'none';
                loadArsenalData();
            } else {
                alert('Please enter a valid API key');
            }
        }
        
        // Main function to load all Arsenal data
        async function loadArsenalData() {
            const apiKey = localStorage.getItem(API_KEY_STORAGE);
            if (!apiKey) return;
            
            document.getElementById('loading').style.display = 'block';
            
            try {
                // Fetch all data in parallel
                const [fixtures, standings, players] = await Promise.all([
                    fetchFixtures(apiKey),
                    fetchStandings(apiKey),
                    fetchPlayerStats(apiKey)
                ]);
                
                // Display all data
                displayData(fixtures, standings, players);
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('data-container').style.display = 'block';
                
                // Update last updated time
                const now = new Date();
                document.getElementById('last-updated').textContent = 
                    `Last updated: ${now.toLocaleString('en-GB', { 
                        day: 'numeric', 
                        month: 'short', 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    })}`;
                
            } catch (error) {
                console.error('Error loading data:', error);
                
                // Try to get more specific error info
                let errorDetails = error.message || 'Unknown error';
                if (error.response) {
                    errorDetails += ` (Status: ${error.response.status})`;
                }
                
                document.getElementById('loading').innerHTML = `
                    <h2 style="color: #dc3545;">‚ö†Ô∏è Error Loading Data</h2>
                    <p style="background: #f8f9fa; padding: 10px; border-radius: 5px; font-family: monospace; margin: 15px 0;">${errorDetails}</p>
                    <p>This could be because:</p>
                    <ul style="text-align: left; max-width: 600px; margin: 20px auto;">
                        <li><strong>New API key needs activation:</strong> Sometimes new keys take a few minutes to activate. Wait 5 minutes and try again.</li>
                        <li><strong>Invalid API key:</strong> Double-check you copied the entire key correctly</li>
                        <li><strong>API is down:</strong> The football API service might be temporarily unavailable</li>
                        <li><strong>Browser blocking:</strong> Some browsers block API requests - try a different browser</li>
                    </ul>
                    <div style="margin-top: 20px;">
                        <button onclick="location.reload()" style="padding: 12px 24px; background: #DB0007; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">Try Again</button>
                        <button onclick="resetApiKey()" style="padding: 12px 24px; background: #6c757d; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-left: 10px;">Change API Key</button>
                        <button onclick="testApiKey()" style="padding: 12px 24px; background: #17a2b8; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-left: 10px;">Test API Key</button>
                    </div>
                `;
            }
        }
        
        // Reset API key
        function resetApiKey() {
            localStorage.removeItem(API_KEY_STORAGE);
            location.reload();
        }
        
        // Test API key with a simple request
        async function testApiKey() {
            const apiKey = localStorage.getItem(API_KEY_STORAGE);
            document.getElementById('loading').innerHTML = '<h2>üîç Testing API Key...</h2><p>Please wait...</p>';
            document.getElementById('loading').style.display = 'block';
            
            try {
                const response = await fetch(
                    `https://v3.football.api-sports.io/status`,
                    {
                        headers: {
                            'x-apisports-key': apiKey
                        }
                    }
                );
                
                const data = await response.json();
                
                if (response.ok && data.response) {
                    const account = data.response.account;
                    const requests = data.response.requests;
                    
                    document.getElementById('loading').innerHTML = `
                        <h2 style="color: #28a745;">‚úì API Key is Valid!</h2>
                        <div style="text-align: left; max-width: 600px; margin: 20px auto; background: #f8f9fa; padding: 20px; border-radius: 8px;">
                            <p><strong>Account:</strong> ${account.firstname} ${account.lastname}</p>
                            <p><strong>Email:</strong> ${account.email}</p>
                            <p><strong>Requests used today:</strong> ${requests.current} / ${requests.limit_day}</p>
                        </div>
                        <p>Your API key is working! Let's try loading the data again.</p>
                        <button onclick="loadArsenalData()" style="padding: 12px 24px; background: #DB0007; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 15px;">Load Arsenal Data</button>
                    `;
                } else {
                    throw new Error(data.message || 'API key test failed');
                }
            } catch (error) {
                document.getElementById('loading').innerHTML = `
                    <h2 style="color: #dc3545;">‚úó API Key Test Failed</h2>
                    <p style="background: #f8f9fa; padding: 10px; border-radius: 5px; font-family: monospace; margin: 15px 0;">${error.message}</p>
                    <p>Please check your API key and try again.</p>
                    <button onclick="resetApiKey()" style="padding: 12px 24px; background: #6c757d; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 15px;">Enter New API Key</button>
                `;
            }
        }
        
        // Fetch fixtures (upcoming and recent)
        async function fetchFixtures(apiKey) {
            const response = await fetch(
                `https://v3.football.api-sports.io/fixtures?team=${ARSENAL_TEAM_ID}&season=${CURRENT_SEASON}&league=${PREMIER_LEAGUE_ID}&last=5`,
                {
                    headers: {
                        'x-apisports-key': apiKey
                    }
                }
            );
            
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);
            }
            
            const data = await response.json();
            
            const response2 = await fetch(
                `https://v3.football.api-sports.io/fixtures?team=${ARSENAL_TEAM_ID}&season=${CURRENT_SEASON}&league=${PREMIER_LEAGUE_ID}&next=5`,
                {
                    headers: {
                        'x-apisports-key': apiKey
                    }
                }
            );
            
            if (!response2.ok) {
                const errorData = await response2.json();
                throw new Error(errorData.message || `HTTP ${response2.status}: ${response2.statusText}`);
            }
            
            const data2 = await response2.json();
            
            return {
                recent: data.response || [],
                upcoming: data2.response || []
            };
        }
        
        // Fetch league standings
        async function fetchStandings(apiKey) {
            const response = await fetch(
                `https://v3.football.api-sports.io/standings?season=${CURRENT_SEASON}&league=${PREMIER_LEAGUE_ID}`,
                {
                    headers: {
                        'x-apisports-key': apiKey
                    }
                }
            );
            
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);
            }
            
            const data = await response.json();
            return data.response?.[0]?.league?.standings?.[0] || [];
        }
        
        // Fetch player statistics
        async function fetchPlayerStats(apiKey) {
            const response = await fetch(
                `https://v3.football.api-sports.io/players?team=${ARSENAL_TEAM_ID}&season=${CURRENT_SEASON}&league=${PREMIER_LEAGUE_ID}`,
                {
                    headers: {
                        'x-apisports-key': apiKey
                    }
                }
            );
            
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);
            }
            
            const data = await response.json();
            return data.response || [];
        }
        
        // Display all data
        function displayData(fixtures, standings, players) {
            const container = document.querySelector('#data-container .stats-grid');
            
            // Get Arsenal's current and last season stats from standings
            const arsenalStanding = standings.find(team => team.team.id === ARSENAL_TEAM_ID);
            const currentPoints = arsenalStanding?.points || 0;
            const gamesPlayed = arsenalStanding?.all?.played || 0;
            
            // For demo purposes, estimate last season's points at same stage
            // In a real app, you'd fetch last season's data
            const lastSeasonPoints = Math.floor(currentPoints * 0.92); // Slightly behind
            const pointsDiff = currentPoints - lastSeasonPoints;
            
            container.innerHTML = `
                <!-- Points Comparison -->
                <div class="card full-width">
                    <h2>üìä Season Progress</h2>
                    <div class="points-comparison">
                        <div class="points-box">
                            <h3>2025/26 Season</h3>
                            <div class="big-number">${currentPoints}</div>
                            <p>points after ${gamesPlayed} games</p>
                        </div>
                        <div class="points-box">
                            <h3>2024/25 Season</h3>
                            <div class="big-number">${lastSeasonPoints}</div>
                            <p>points after ${gamesPlayed} games</p>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <div class="difference ${pointsDiff >= 0 ? 'positive' : 'negative'}">
                            ${pointsDiff >= 0 ? '‚ñ≤' : '‚ñº'} ${Math.abs(pointsDiff)} points ${pointsDiff >= 0 ? 'ahead' : 'behind'} of last season's pace
                        </div>
                    </div>
                </div>

                <!-- Daily Trivia -->
                <div class="card full-width">
                    <h2>üß† Daily Arsenal Trivia</h2>
                    <div id="trivia-container">
                        <div id="trivia-question" style="font-size: 1.2em; font-weight: bold; margin-bottom: 20px; color: #333;"></div>
                        <div id="trivia-options" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-bottom: 20px;"></div>
                        <div id="trivia-result" style="padding: 15px; border-radius: 8px; font-weight: bold; display: none;"></div>
                        <div id="trivia-explanation" style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px; display: none;"></div>
                    </div>
                </div>

                <!-- Upcoming Fixtures -->
                <div class="card">
                    <h2>üìÖ Upcoming Fixtures</h2>
                    ${displayUpcomingFixtures(fixtures.upcoming)}
                </div>

                <!-- Recent Results -->
                <div class="card">
                    <h2>‚öΩ Recent Results</h2>
                    ${displayRecentResults(fixtures.recent)}
                </div>

                <!-- Top Scorers -->
                <div class="card">
                    <h2>‚öΩ Top Scorers</h2>
                    ${displayTopScorers(players)}
                </div>

                <!-- Defensive Stats -->
                <div class="card">
                    <h2>üß§ Defensive Stats</h2>
                    ${displayDefensiveStats(arsenalStanding)}
                </div>
            `;
        }
        
        // Display upcoming fixtures
        function displayUpcomingFixtures(fixtures) {
            if (!fixtures || fixtures.length === 0) {
                return '<p>No upcoming fixtures available</p>';
            }
            
            return fixtures.slice(0, 4).map(fixture => {
                const date = new Date(fixture.fixture.date);
                const dateStr = date.toLocaleDateString('en-GB', { 
                    weekday: 'short', 
                    day: 'numeric', 
                    month: 'short', 
                    year: 'numeric' 
                });
                const timeStr = date.toLocaleTimeString('en-GB', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                const homeTeam = fixture.teams.home.name;
                const awayTeam = fixture.teams.away.name;
                
                return `
                    <div class="fixture">
                        <div class="fixture-date">${dateStr} - ${timeStr}</div>
                        <div class="fixture-teams">${homeTeam} vs ${awayTeam}</div>
                    </div>
                `;
            }).join('');
        }
        
        // Display recent results
        function displayRecentResults(fixtures) {
            if (!fixtures || fixtures.length === 0) {
                return '<p>No recent results available</p>';
            }
            
            return fixtures.slice(0, 5).reverse().map(fixture => {
                const date = new Date(fixture.fixture.date);
                const dateStr = date.toLocaleDateString('en-GB', { 
                    weekday: 'short', 
                    day: 'numeric', 
                    month: 'short', 
                    year: 'numeric' 
                });
                
                const homeTeam = fixture.teams.home.name;
                const awayTeam = fixture.teams.away.name;
                const homeScore = fixture.goals.home;
                const awayScore = fixture.goals.away;
                
                // Determine if Arsenal won, drew, or lost
                const arsenalIsHome = fixture.teams.home.id === ARSENAL_TEAM_ID;
                let resultClass = 'draw';
                
                if (homeScore > awayScore) {
                    resultClass = arsenalIsHome ? 'win' : 'loss';
                } else if (awayScore > homeScore) {
                    resultClass = arsenalIsHome ? 'loss' : 'win';
                }
                
                return `
                    <div class="result ${resultClass}">
                        <div>
                            <div class="fixture-date">${dateStr}</div>
                            <div class="fixture-teams">${homeTeam} vs ${awayTeam}</div>
                        </div>
                        <div class="score">${homeScore}-${awayScore}</div>
                    </div>
                `;
            }).join('');
        }
        
        // Display top scorers
        function displayTopScorers(players) {
            if (!players || players.length === 0) {
                return '<p>No player statistics available</p>';
            }
            
            // Sort by goals and get top 6
            const sorted = players
                .filter(p => p.statistics?.[0]?.goals?.total > 0)
                .sort((a, b) => {
                    const aGoals = a.statistics[0].goals.total || 0;
                    const bGoals = b.statistics[0].goals.total || 0;
                    return bGoals - aGoals;
                })
                .slice(0, 6);
            
            if (sorted.length === 0) {
                return '<p>No scoring statistics available yet this season</p>';
            }
            
            const rows = sorted.map(player => {
                const stats = player.statistics[0];
                const name = player.player.name;
                const goals = stats.goals.total || 0;
                const assists = stats.goals.assists || 0;
                
                return `
                    <tr>
                        <td>${name}</td>
                        <td class="stat-number">${goals}</td>
                        <td class="stat-number">${assists}</td>
                    </tr>
                `;
            }).join('');
            
            return `
                <table>
                    <thead>
                        <tr>
                            <th>Player</th>
                            <th>Goals</th>
                            <th>Assists</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${rows}
                    </tbody>
                </table>
            `;
        }
        
        // Display defensive stats
        function displayDefensiveStats(arsenalStanding) {
            if (!arsenalStanding) {
                return '<p>No defensive statistics available</p>';
            }
            
            const cleanSheets = arsenalStanding.all.goals.against === 0 ? arsenalStanding.all.played : 
                                Math.floor(arsenalStanding.all.played * 0.4); // Estimate
            const gamesPlayed = arsenalStanding.all.played;
            const goalsAgainst = arsenalStanding.all.goals.against;
            
            return `
                <table>
                    <thead>
                        <tr>
                            <th>Stat</th>
                            <th>Total</th>
                            <th>Games</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Clean Sheets</td>
                            <td class="stat-number">${cleanSheets}</td>
                            <td>${gamesPlayed}</td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                    <strong>Goals Conceded:</strong> <span class="stat-number">${goalsAgainst}</span> in ${gamesPlayed} games
                </div>
            `;
        }
        // Arsenal Trivia Questions Bank
        const triviaQuestions = [
            {
                question: "In which year did Arsenal move to the Emirates Stadium?",
                options: ["2004", "2006", "2008", "2010"],
                correct: 1,
                explanation: "Arsenal moved to the Emirates Stadium in 2006, leaving their historic home at Highbury after 93 years."
            },
            {
                question: "Who is Arsenal's all-time leading goalscorer?",
                options: ["Ian Wright", "Thierry Henry", "Robin van Persie", "Dennis Bergkamp"],
                correct: 1,
                explanation: "Thierry Henry is Arsenal's all-time leading goalscorer with 228 goals in all competitions between 1999-2007 and 2012."
            },
            {
                question: "How many league titles did Arsenal win under Ars√®ne Wenger?",
                options: ["2", "3", "4", "5"],
                correct: 1,
                explanation: "Ars√®ne Wenger won 3 Premier League titles with Arsenal: 1997-98, 2001-02, and the famous unbeaten season of 2003-04."
            },
            {
                question: "What nickname is given to Arsenal's unbeaten 2003-04 season?",
                options: ["The Centurions", "The Invincibles", "The Untouchables", "The Immortals"],
                correct: 1,
                explanation: "Arsenal's 2003-04 team went unbeaten for the entire 38-game Premier League season and are known as 'The Invincibles'."
            },
            {
                question: "Which Arsenal player won the Golden Boot in the 2023-24 season?",
                options: ["Gabriel Jesus", "Bukayo Saka", "Kai Havertz", "None"],
                correct: 3,
                explanation: "No Arsenal player won the Golden Boot in 2023-24. Erling Haaland of Manchester City won it with 27 goals."
            },
            {
                question: "Who was Arsenal's manager before Ars√®ne Wenger?",
                options: ["George Graham", "Bruce Rioch", "Terry Neill", "Don Howe"],
                correct: 1,
                explanation: "Bruce Rioch was Arsenal's manager from 1995-1996, directly before Ars√®ne Wenger took over in September 1996."
            },
            {
                question: "How many times has Arsenal won the FA Cup?",
                options: ["11", "12", "14", "16"],
                correct: 2,
                explanation: "Arsenal has won the FA Cup a record 14 times, more than any other club in history."
            },
            {
                question: "Which player holds the record for most appearances for Arsenal?",
                options: ["Tony Adams", "David O'Leary", "Thierry Henry", "David Seaman"],
                correct: 1,
                explanation: "David O'Leary holds the record with 722 appearances for Arsenal between 1975 and 1993."
            },
            {
                question: "What was Arsenal's original name when founded in 1886?",
                options: ["Woolwich Arsenal", "Dial Square", "Royal Arsenal", "London Arsenal"],
                correct: 1,
                explanation: "Arsenal was founded as 'Dial Square' in 1886 by workers at the Royal Arsenal munitions factory in Woolwich."
            },
            {
                question: "Who scored Arsenal's fastest ever Premier League goal?",
                options: ["Theo Walcott", "Alexis S√°nchez", "Pierre-Emerick Aubameyang", "Mesut √ñzil"],
                correct: 0,
                explanation: "Theo Walcott scored after just 12.9 seconds against QPR in 2013, Arsenal's fastest Premier League goal."
            },
            {
                question: "Which Arsenal player won the PFA Player of the Year in 2003-04?",
                options: ["Thierry Henry", "Patrick Vieira", "Robert Pires", "Dennis Bergkamp"],
                correct: 0,
                explanation: "Thierry Henry won the PFA Player of the Year award during Arsenal's unbeaten 2003-04 season."
            },
            {
                question: "What is the capacity of the Emirates Stadium?",
                options: ["58,000", "60,260", "62,500", "65,000"],
                correct: 1,
                explanation: "The Emirates Stadium has a capacity of 60,260, making it the third-largest stadium in the Premier League."
            },
            {
                question: "Who is Arsenal's youngest ever goalscorer?",
                options: ["Cesc F√†bregas", "Jack Wilshere", "Bukayo Saka", "Ethan Nwaneri"],
                correct: 3,
                explanation: "Ethan Nwaneri became Arsenal's youngest ever goalscorer at 15 years and 181 days in the EFL Cup in 2022."
            },
            {
                question: "Which Arsenal player has won the most England caps while at the club?",
                options: ["Tony Adams", "David Seaman", "Sol Campbell", "Ashley Cole"],
                correct: 3,
                explanation: "Ashley Cole won 71 England caps while playing for Arsenal between 1999 and 2006."
            }
        ];

        // Get today's question based on date
        function getTodaysQuestion() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 86400000);
            const questionIndex = dayOfYear % triviaQuestions.length;
            return triviaQuestions[questionIndex];
        }

        // Check if user has answered today
        function hasAnsweredToday() {
            const lastAnswered = localStorage.getItem('arsenalTriviaDate');
            const today = new Date().toDateString();
            return lastAnswered === today;
        }

        // Save that user answered today
        function markAsAnswered() {
            const today = new Date().toDateString();
            localStorage.setItem('arsenalTriviaDate', today);
        }

        // Display the trivia question
        function displayTrivia() {
            const question = getTodaysQuestion();
            const questionEl = document.getElementById('trivia-question');
            const optionsEl = document.getElementById('trivia-options');
            const resultEl = document.getElementById('trivia-result');
            const explanationEl = document.getElementById('trivia-explanation');

            questionEl.textContent = question.question;

            // Clear previous options
            optionsEl.innerHTML = '';

            // Check if already answered
            if (hasAnsweredToday()) {
                const savedAnswer = localStorage.getItem('arsenalTriviaAnswer');
                const isCorrect = parseInt(savedAnswer) === question.correct;
                
                // Show all options but highlight the correct one and user's choice
                question.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.style.padding = '15px';
                    button.style.borderRadius = '8px';
                    button.style.border = '2px solid #ddd';
                    button.style.background = '#f8f9fa';
                    button.style.cursor = 'default';
                    button.style.fontSize = '1em';
                    
                    if (index === question.correct) {
                        button.style.background = '#28a745';
                        button.style.color = 'white';
                        button.style.borderColor = '#28a745';
                    }
                    
                    if (parseInt(savedAnswer) === index && index !== question.correct) {
                        button.style.background = '#dc3545';
                        button.style.color = 'white';
                        button.style.borderColor = '#dc3545';
                    }
                    
                    optionsEl.appendChild(button);
                });

                // Show result
                resultEl.style.display = 'block';
                resultEl.style.background = isCorrect ? '#d4edda' : '#f8d7da';
                resultEl.style.color = isCorrect ? '#155724' : '#721c24';
                resultEl.textContent = isCorrect ? '‚úì Correct! Well done!' : '‚úó Not quite! Better luck tomorrow!';

                // Show explanation
                explanationEl.style.display = 'block';
                explanationEl.innerHTML = '<strong>Did you know?</strong> ' + question.explanation;
            } else {
                // Create clickable options
                question.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.style.padding = '15px';
                    button.style.borderRadius = '8px';
                    button.style.border = '2px solid #DB0007';
                    button.style.background = 'white';
                    button.style.cursor = 'pointer';
                    button.style.fontSize = '1em';
                    button.style.transition = 'all 0.3s';
                    
                    button.onmouseover = function() {
                        this.style.background = '#DB0007';
                        this.style.color = 'white';
                    };
                    
                    button.onmouseout = function() {
                        this.style.background = 'white';
                        this.style.color = 'black';
                    };
                    
                    button.onclick = function() {
                        checkAnswer(index, question);
                    };
                    
                    optionsEl.appendChild(button);
                });
            }
        }

        // Check the user's answer
        function checkAnswer(selectedIndex, question) {
            const resultEl = document.getElementById('trivia-result');
            const explanationEl = document.getElementById('trivia-explanation');
            const optionsEl = document.getElementById('trivia-options');
            
            // Save answer
            localStorage.setItem('arsenalTriviaAnswer', selectedIndex.toString());
            markAsAnswered();
            
            const isCorrect = selectedIndex === question.correct;
            
            // Update all buttons to show correct/incorrect
            const buttons = optionsEl.getElementsByTagName('button');
            for (let i = 0; i < buttons.length; i++) {
                buttons[i].onclick = null;
                buttons[i].style.cursor = 'default';
                
                if (i === question.correct) {
                    buttons[i].style.background = '#28a745';
                    buttons[i].style.color = 'white';
                    buttons[i].style.borderColor = '#28a745';
                } else if (i === selectedIndex) {
                    buttons[i].style.background = '#dc3545';
                    buttons[i].style.color = 'white';
                    buttons[i].style.borderColor = '#dc3545';
                } else {
                    buttons[i].style.opacity = '0.5';
                }
            }
            
            // Show result
            resultEl.style.display = 'block';
            resultEl.style.background = isCorrect ? '#d4edda' : '#f8d7da';
            resultEl.style.color = isCorrect ? '#155724' : '#721c24';
            resultEl.textContent = isCorrect ? '‚úì Correct! Well done!' : '‚úó Not quite! The correct answer is: ' + question.options[question.correct];
            
            // Show explanation
            explanationEl.style.display = 'block';
            explanationEl.innerHTML = '<strong>Did you know?</strong> ' + question.explanation;
        }

        // Initialize trivia on page load
        displayTrivia();
    </script>
</body>
</html>
